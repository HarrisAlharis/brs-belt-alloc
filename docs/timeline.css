:root{
  --bg:#0b1220;
  --panel:#0f1726;
  --ink:#e5edf7;
  --muted:#9fb1c5;
  --grid:rgba(255,255,255,.06);
  --chip:#182235;
  --chip-ink:#cfe0ff;

  --ok:#11361f;      --ok-ink:#b8f3c7;
  --d10:#38280f;     --d10-ink:#ffd69c;
  --d20:#3b1416;     --d20-ink:#ffb4b9;
  --early:#0e2238;   --early-ink:#a8d8ff;

  --puck:#132638;    --puck-ink:#dfeafb;

  --row-h: 110px;
  --belt-col-w: 110px;
  --ruler-h: 44px;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--ink);
  font:14px/1.3 system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

.topbar{
  display:flex;justify-content:space-between;align-items:baseline;
  padding:14px 16px;border-bottom:1px solid var(--grid);background:var(--panel);
}
.brand{font-weight:700}
.meta{color:var(--muted);font-size:12px}

.controls{
  display:flex;justify-content:space-between;align-items:center;
  padding:8px 10px;border-bottom:1px solid var(--grid);background:#0d1524; gap:8px;
}
.chiprow{display:flex; gap:8px; flex-wrap:wrap}
.chip{
  background:var(--chip); color:var(--chip-ink); border:1px solid var(--grid);
  padding:6px 12px; border-radius:999px; cursor:pointer; user-select:none;
}
.chip.active{outline:2px solid #4aa3ff}

.right-controls{display:flex;align-items:center;gap:10px;margin-left:auto}
.lbl{color:var(--muted);font-size:12px}
select, .btn{
  background:var(--chip); color:var(--ink); border:1px solid var(--grid); border-radius:8px;
  padding:6px 10px; font:inherit;
}
.btn{cursor:pointer}

.legend{display:flex;gap:14px;color:var(--muted);font-size:12px;align-items:center}
.dot{display:inline-block;width:10px;height:10px;border-radius:50%;margin-right:6px;border:1px solid var(--grid)}
.dot-ok{background:var(--ok)}
.dot-10{background:var(--d10)}
.dot-20{background:var(--d20)}
.dot-early{background:var(--early)}
.dot-stale{background:#333}

.viewport{
  position:relative; height: calc(100vh - 148px); /* header+controls+footer */
  display:flex; overflow:hidden; background:var(--bg);
}

.belts-col{
  position:sticky; left:0; top:0; bottom:0; z-index:5;
  width:var(--belt-col-w); background:linear-gradient(90deg,var(--panel),transparent);
  border-right:1px solid var(--grid);
  padding-top:var(--ruler-h);
}
.belt-label{
  height:var(--row-h); display:flex; align-items:center; justify-content:center;
  color:var(--muted); font-weight:600; border-bottom:1px solid var(--grid);
}

.scroll-outer{ position:relative; flex:1; overflow:auto; }
.scroll-inner{ position:relative; min-height:100%; padding-left:12px; }

.ruler{
  position:sticky; top:0; left:0; width:100%; z-index:4;
  background:linear-gradient(180deg,rgba(255,255,255,.06),transparent 70%);
  border-bottom:1px solid var(--grid);
}

.rows{ position:relative; padding-top:8px; }
.row{
  position:relative; height:var(--row-h);
  border-bottom:1px dashed var(--grid);
}

.puck{
  position:absolute; top:18px;
  min-width:210px; height:64px; padding:10px 14px 8px 14px;
  border-radius:14px; border:1px solid rgba(255,255,255,.12);
  background:var(--puck); color:var(--puck-ink);
  box-shadow: 0 6px 20px rgba(0,0,0,.25);
  display:flex;flex-direction:column;justify-content:center;gap:4px;
  white-space:nowrap; overflow:hidden; text-overflow:ellipsis;
}
.puck .t1{font-weight:700; letter-spacing:.2px}
.puck .t2{font-size:12px; color:var(--muted)}

.puck.ok{ background:var(--ok); color:var(--ok-ink) }
.puck.d10{ background:var(--d10); color:var(--d10-ink) }
.puck.d20{ background:var(--d20); color:var(--d20-ink) }
.puck.early{ background:var(--early); color:var(--early-ink) }
.puck.stale{ opacity:.55; filter:saturate(.6); }

.now-line{
  position:absolute; top:var(--ruler-h); bottom:0;
  width:2px; background:linear-gradient(180deg,#7bb1ff,#3a82ff);
  box-shadow:0 0 10px rgba(58,130,255,.65);
  pointer-events:none; z-index:3;
}

.foot{ padding:8px 12px; color:var(--muted); font-size:12px; border-top:1px solid var(--grid) }
