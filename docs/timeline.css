:root{
  --bg:#0f1720;
  --panel:#0b1119;
  --ink:#d7e2ee;
  --muted:#90a4b8;
  --grid:#1b2633;
  --accent:#3aa0ff;
  --on:#2a6f3f;
  --d10:#8a6a1b;
  --d20:#7a2a2a;
  --early:#1d3d7a;
  --old:#4b5563;

  --row-h:92px;
  --lane-pad:14px;
  --puck-h:58px;
  --puck-radius:14px;
  --shadow:0 6px 16px rgba(0,0,0,.35);
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;background:var(--bg);color:var(--ink);
  font:14px/1.4 ui-sans-serif,system-ui,Segoe UI,Roboto,Helvetica,Arial;
}

.topbar{
  position:sticky;top:0;z-index:30;
  background:linear-gradient(180deg,var(--panel),rgba(11,17,25,.6));
  backdrop-filter:saturate(140%) blur(6px);
  border-bottom:1px solid #101824;
  padding:10px 14px 8px;
  display:flex;align-items:center;gap:16px;flex-wrap:wrap;
}
.brand{font-weight:700;letter-spacing:.2px}
.controls{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.controls select,.controls button{
  background:#0e1520;color:var(--ink);border:1px solid #1a2533;
  border-radius:10px;padding:8px 10px
}
.legend{color:var(--muted);display:flex;align-items:center;gap:12px}
.dot{display:inline-block;width:10px;height:10px;border-radius:999px;margin-right:6px}
.dot-on{background:var(--on)}
.dot-10{background:var(--d10)}
.dot-20{background:var(--d20)}
.dot-early{background:var(--early)}
.dot-old{background:var(--old)}

#errorBanner{margin:8px 14px 0}
.error{
  background:#3a0e12;border:1px solid #6e1b23;color:#ffd6db;
  padding:10px 12px;border-radius:10px;
}
.hidden{display:none}

#gantt{display:grid;grid-template-columns:120px 1fr;gap:0;margin-top:6px}
.y-axis{
  background:var(--panel);border-right:1px solid #101824;
  position:sticky;left:0;z-index:20;
}
.y-axis .belt{height:var(--row-h);display:flex;align-items:center;justify-content:flex-end;padding-right:10px;color:var(--muted);border-bottom:1px solid #101824}
.gantt-scroll{position:relative;overflow:auto}
.x-axis{position:sticky;top:42px;height:36px;background:linear-gradient(180deg,#0e1622,#0b1119);border-bottom:1px solid #101824;display:flex;align-items:center;padding-left:8px;gap:80px;z-index:25}
.x-tick{color:#a7bbd0;font-weight:600;text-shadow:0 1px 0 #000}
.rows{position:relative}
.row{height:var(--row-h);border-bottom:1px solid #101824;background:
  linear-gradient(180deg,transparent 70%,rgba(255,255,255,.02))}
.row::before{
  content:"";position:absolute;left:0;right:0;top:calc(36px + 1px);
  height:1px;background:var(--grid)
}
.now-line{
  position:absolute;top:0;bottom:0;width:2px;background:linear-gradient(to bottom,#3aa0ff,#8fd0ff);
  box-shadow:0 0 10px rgba(58,160,255,.5);z-index:24
}
.puck{
  position:absolute;height:var(--puck-h);border-radius:var(--puck-radius);
  background:#102131;border:1px solid #1b3147;box-shadow:var(--shadow);
  padding:10px 12px;color:#dfe9f6;display:flex;flex-direction:column;justify-content:center;
}
.puck .title{font-weight:800;letter-spacing:.2px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.puck .sub{color:#afc3d6;font-size:12px}
.puck.on{background:rgba(34,96,55,.9);border-color:#2f7a4a}
.puck.d10{background:rgba(138,106,27,.9);border-color:#b48a35}
.puck.d20{background:rgba(110,42,42,.9);border-color:#b75252}
.puck.early{background:rgba(32,60,120,.9);border-color:#3f6cc7}
.puck.old{opacity:.75;filter:saturate(.6)}
.footer{color:#88a0b8;padding:12px 14px}
